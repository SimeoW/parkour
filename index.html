<!DOCTYLE html>
<html>
  <head>
    <meta charset='utf-8'/>
    <meta name='viewport' content='user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width'>
    <style>
      html {
        height: 100%;
        margin: 0;
        padding: 0px;
        width: 100%;
      }
      body {
        background-color: #101010
      }
      canvas {
        height: 100%;
        left: 0;
        position: fixed;
        top: 0;
        width: 100%;
      }
      #viewport {
        z-index: -1;
      }
    </style>
    <script type='text/javascript' src='lib/three.js'></script>
    <script type='text/javascript' src='lib/physi.js'></script>
    <script type='text/javascript' src='lib/stinput.js'></script>
    <script type='text/javascript' src='lib/camera_orbit.js'></script>
    <script type='text/javascript' src='lib/text_texture.js'></script>
    <script type='text/javascript' src='lib/text_sprite.js'></script>
    <script type='text/javascript' src='socket.io/socket.io.js'></script>
  </head>
  <body>
    <div id='viewport'></div>
  </body>
  <script type='text/javascript' src='game.js'></script>
  <script type='text/javascript'>
    'use strict';
    Physijs.scripts.worker = 'lib/physijs_worker.js';
    Physijs.scripts.ammo='ammo.js';
    

    let player_name = 'Guest';
    if(localStorage.getItem('playerName') == null) {
      player_name = prompt('Welcome! What is your name?', player_name) || player_name;
      localStorage.setItem('playerName', player_name);
    } else {
      player_name = prompt('Welcome! What is your name?', localStorage.getItem('playerName')) || player_name;
      localStorage.setItem('playerName', player_name);
    }
    const server_name = '';

    const game = new Game();
    game.connect(player_name, server_name);
    
    // On window resize, resize the renderer as well
    window.addEventListener('resize', onWindowResize, false);
    function onWindowResize(){
      game.camera.aspect = window.innerWidth / window.innerHeight;
      game.camera.updateProjectionMatrix();
      game.renderer.setSize(window.innerWidth, window.innerHeight);
    }
  </script>
</html>